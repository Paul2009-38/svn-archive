<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Map [
<!ENTITY % entities SYSTEM "inc/entities.xml.inc">
<!ENTITY % sharedentities SYSTEM "entities.xml.ent">

<!ENTITY background-color "#E9F8FF"><!-- background (default land) -->
<!ENTITY forestland-color "#E9F8FF"><!-- wood -->
<!ENTITY farmland-color "#FFF"><!-- farmland, field, orchard -->
<!ENTITY openland-color "#FFF"><!-- meadow, recreation ground, park -->
<!ENTITY roadcore-color "#FFF"><!-- roads core, parking, pitch, yard -->
<!ENTITY urbanarea-color "#CCC"><!-- residential, industrial -->
<!ENTITY regulatedarea-color "#CCC"><!-- construction, landfill, quarry -->
<!ENTITY water-color "#0076AD"><!-- water -->
<!ENTITY waterline-color "#006594"><!-- stream, shoreline -->
<!ENTITY naturearea-color "#007D33">
<!ENTITY trail-color "#DDD"><!-- path, track, footway, cycleway -->
<!ENTITY nordic-color "#F90025"><!-- piste:type=nordic, route=ski -->

%sharedentities;
%entities;
]>

<Map bgcolor="&water-color;" srs="&osm2pgsql_projection;"
     minimum_version="0.7.1">
  &fontset-settings;

<Style name="skiing">
  <Rule>
    <Filter>[piste:grooming] = 'backcountry'</Filter>
    &maxscale_zoom13;
    <LineSymbolizer>
      <CssParameter name="stroke">&nordic-color;</CssParameter>
      <CssParameter name="stroke-width">1.5</CssParameter>
      <CssParameter name="stroke-dasharray">6,8</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:grooming] = 'scooter'</Filter>
    &maxscale_zoom11;
    <LineSymbolizer>
      <CssParameter name="stroke">&nordic-color;</CssParameter>
      <CssParameter name="stroke-width">1.5</CssParameter>
      <CssParameter name="stroke-dasharray">20,3</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'nordic' and not ([piste:grooming] = 'backcountry' or [piste:grooming] = 'scooter')</Filter>
    &maxscale_zoom11;
    <LineSymbolizer>
      <CssParameter name="stroke">&nordic-color;</CssParameter>
      <CssParameter name="stroke-width">2</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'nordic' and [lit]='yes'</Filter>
    &maxscale_zoom13;
    <LineSymbolizer>
      <CssParameter name="stroke">&nordic-color;</CssParameter>
      <CssParameter name="stroke-width">6</CssParameter>
      <CssParameter name="stroke-dasharray">1,21</CssParameter>
      <CssParameter name="stroke-linejoin">round</CssParameter>
      <CssParameter name="stroke-linecap">round</CssParameter>
    </LineSymbolizer>
  </Rule>

  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'novice'</Filter>
    &maxscale_zoom12;
    &minscale_zoom13;
    <LineSymbolizer>
      <CssParameter name="stroke">#00A245</CssParameter>
      <CssParameter name="stroke-width">1.5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'novice'</Filter>
    &maxscale_zoom14;
    &minscale_zoom14;
    <LineSymbolizer>
      <CssParameter name="stroke">#00A245</CssParameter>
      <CssParameter name="stroke-width">5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'novice'</Filter>
    &maxscale_zoom15;
    <LineSymbolizer>
      <CssParameter name="stroke">#00A245</CssParameter>
      <CssParameter name="stroke-width">7.5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>

  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'easy'</Filter>
    &maxscale_zoom12;
    &minscale_zoom13;
    <LineSymbolizer>
      <CssParameter name="stroke">#00A4DF</CssParameter>
      <CssParameter name="stroke-width">1.5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'easy'</Filter>
    &maxscale_zoom14;
    &minscale_zoom14;
    <LineSymbolizer>
      <CssParameter name="stroke">#00A4DF</CssParameter>
      <CssParameter name="stroke-width">5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'easy'</Filter>
    &maxscale_zoom15;
    <LineSymbolizer>
      <CssParameter name="stroke">#00A4DF</CssParameter>
      <CssParameter name="stroke-width">7.5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>

  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'intermediate'</Filter>
    &maxscale_zoom12;
    &minscale_zoom13;
    <LineSymbolizer>
      <CssParameter name="stroke">#E70019</CssParameter>
      <CssParameter name="stroke-width">1.5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'intermediate'</Filter>
    &maxscale_zoom14;
    &minscale_zoom14;
    <LineSymbolizer>
      <CssParameter name="stroke">#E70019</CssParameter>
      <CssParameter name="stroke-width">5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'intermediate'</Filter>
    &maxscale_zoom15;
    <LineSymbolizer>
      <CssParameter name="stroke">#E70019</CssParameter>
      <CssParameter name="stroke-width">7.5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>

  <Rule>
    <Filter>[piste:type] = 'downhill' and ([piste:difficulty] = 'advanced' or [piste:difficulty] = 'expert')</Filter>
    &maxscale_zoom12;
    &minscale_zoom13;
    <LineSymbolizer>
      <CssParameter name="stroke">#17180D</CssParameter>
      <CssParameter name="stroke-width">1.5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'downhill' and ([piste:difficulty] = 'advanced' or [piste:difficulty] = 'expert')</Filter>
    &maxscale_zoom14;
    &minscale_zoom14;
    <LineSymbolizer>
      <CssParameter name="stroke">#17180D</CssParameter>
      <CssParameter name="stroke-width">5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'downhill' and ([piste:difficulty] = 'advanced' or [piste:difficulty] = 'expert')</Filter>
    &maxscale_zoom15;
    <LineSymbolizer>
      <CssParameter name="stroke">#17180D</CssParameter>
      <CssParameter name="stroke-width">7.5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>

<!-- Expert orange #FF8040 -->

  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'freeride'</Filter>
    &maxscale_zoom12;
    &minscale_zoom13;
    <LineSymbolizer>
      <CssParameter name="stroke">#F6E760</CssParameter>
      <CssParameter name="stroke-width">1.5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'freeride'</Filter>
    &maxscale_zoom15;
    <LineSymbolizer>
      <CssParameter name="stroke">#F6E760</CssParameter>
      <CssParameter name="stroke-width">7.5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>
  <Rule>
    <Filter>[piste:type] = 'downhill' and [piste:difficulty] = 'freeride'</Filter>
    &maxscale_zoom14;
    &minscale_zoom14;
    <LineSymbolizer>
      <CssParameter name="stroke">#F6E760</CssParameter>
      <CssParameter name="stroke-width">5</CssParameter>
      <CssParameter name="stroke-opacity">0.65</CssParameter>
    </LineSymbolizer>
  </Rule>

</Style>

<Style name="symbols-winter">
  <Rule>
    &maxscale_zoom13;
    <Filter>[piste:type]='playground' or [leisure]='ski_playground'</Filter>
    <PointSymbolizer file="&symbols;/skiplayground.png"
       type="png" width="15" height="15"
       allow_overlap="false"/>
  </Rule>
  <Rule>
    &maxscale_zoom13;
    <Filter>[sport]='biathlon'</Filter>
    <PointSymbolizer file="&symbols;/biathlon.png"
       type="png" width="15" height="15"
       allow_overlap="false"/>
  </Rule>
  <Rule>
    &maxscale_zoom13;
    <Filter>[sport]='ski_jump_take_off'</Filter>
    <PointSymbolizer file="&symbols;/skijump.png"
       type="png" width="15" height="15"
       allow_overlap="false"/>
  </Rule>
</Style>

&layer-world;
&layer-landscape;
&layer-linefeatures;
&layer-buildings;
&layer-roads;
&layer-nationalpark;

<Layer name="skiing" status="on" srs="&osm2pgsql_projection;">
    <StyleName>skiing</StyleName>
    <Datasource>
      <Parameter name="table">
      (select way,"piste:type","piste:grooming","piste:difficulty",route,lit
       from &prefix;_line
       where "piste:type" in ('nordic','downhill')
          or "piste:grooming" is not null
          or route='ski'
      ) as skiing
      </Parameter>
      &datasource-settings;
   </Datasource>
</Layer>

&layer-roadnames;
&layer-powerlines;
&layer-symbols-facilities;
&layer-symbols-hiking;

<Layer name="symbols-winter" status="on" srs="&osm2pgsql_projection;">
  <StyleName>symbols-winter</StyleName>
  <Datasource>
    <Parameter name="table">
    (select *
    from &prefix;_point
    where sport is not null
       or landuse='winter_sports'
       or "piste:type"='playground'
       or leisure='ski_playground'
    ) as symbols</Parameter>
    &datasource-settings;
  </Datasource>
</Layer>
<Layer name="symbols-winter-poly" status="on" srs="&osm2pgsql_projection;">
  <StyleName>symbols-winter</StyleName>
  <Datasource>
    <Parameter name="table">
    (select *
    from &prefix;_polygon
    where sport is not null
       or landuse='winter_sports'
       or "piste:type"='playground'
       or leisure='ski_playground'
    ) as symbols</Parameter>
    &datasource-settings;
  </Datasource>
</Layer>

&layer-text-water;
&layer-areatext;
&layer-placenames;
</Map>
